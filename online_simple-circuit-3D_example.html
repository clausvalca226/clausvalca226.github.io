<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Simple Circuit</title>
		<style>body{ margin: 0;}canvas{ width: 100%; height: 100%;}</style>
	</head>
	<body>
		<p>This is a simulation of charges flowing around a circuit	and magnetic field lines that result from moving charges.</p>
		<p>6</p>
		<script type="module">
import * as THREE from './three.module.js';
import {OrbitControls} from './OrbitControls.js';

let scene = new THREE.Scene();
	scene.add(new THREE.DirectionalLight());
var light=new THREE.DirectionalLight(0xFFFFFF,1);
	light.position.set(0,-1,0);
	scene.add(light);

let temp_particle;
let particles = [];
let nodes = [];
let node={p:new THREE.Vector3(-10,-10,-10),prev:this,next:this}; nodes.push(node);
	node={p:new THREE.Vector3(10,-10,10),prev:nodes[0],next:this}; nodes[0].next=node; nodes.push(node);
	node={p:new THREE.Vector3(10,10,10),prev:nodes[1],next:this}; nodes[1].next=node; nodes.push(node);
	node={p:new THREE.Vector3(-10,10,-10),prev:nodes[2],next:nodes[0]}; nodes[2].next=node; nodes.push(node);
	nodes[0].prev=node;

for(let i=0;i<100;i++){
	temp = {s:new THREE.Mesh(new THREE.SphereGeometry(1),new THREE.MeshStandardMaterial({color: 0xff0000})),n:nodes[0]};
	temp.s.position.set(temp.n.p.x,temp.n.p.y,temp.n.p.z-i*4);
	scene.add(temp); particles.push(temp);
}

let camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 1000 );
	camera.position.set(0,20,100);
let renderer = new THREE.WebGLRenderer();
	renderer.setSize( window.innerWidth, window.innerHeight );
	renderer.setClearColor(0xffffff,1);
document.body.appendChild( renderer.domElement );

var controls = new OrbitControls( camera, renderer.domElement );
	controls.update();
	renderer.render( scene, camera );

function update_particles(item){
	item.s.position.copy(item.s.position.add(new THREE.Vector3(0,0,1)));
}

function animate() {requestAnimationFrame( animate );particles.foreach(update_particles);controls.update();renderer.render( scene, camera );}
animate();
</script></body></html>
