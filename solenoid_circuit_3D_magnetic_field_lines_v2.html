<!DOCTYPE html>
<html><head><meta charset="utf-8"><title>Loop Circuit</title>
	<style>body{ margin: 0;}canvas{ width: 100%; height: 100%;}</style></head>
	<body><p id="init_set"></p>
<script type="module">
import * as THREE from './three.module.js';
import {OrbitControls} from './OrbitControls.js';

// create sene and add light from above and below
let scene = new THREE.Scene();
	scene.add(new THREE.DirectionalLight());
var light=new THREE.DirectionalLight(0xFFFFFF,1); light.position.set(0,-1,0); scene.add(light);
let renderer = new THREE.WebGLRenderer(); renderer.setSize( window.innerWidth, window.innerHeight ); renderer.setClearColor(0xffffff,1);
document.body.appendChild( renderer.domElement );
let camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 1000 ); camera.position.set(0,20,100);
var controls = new OrbitControls( camera, renderer.domElement ); controls.update(); renderer.render( scene, camera );

let particles = [];
let nodes = [];
let rings = [];
	
function update_particles(item){
	item.s.position.add(item.n.p.clone().sub(item.s.position).normalize().multiplyScalar(0.1));
	if(item.s.position.clone().sub(item.n.p).length()<0.3){item.n=item.n.next;}
}

function update_rings(item){item.rotateOnAxis(new THREE.Vector3(0,0,1),Math.PI/100);}

function initialize_page(){
	let num_rings=[];
	let init_nodes=[];
	init_nodes.push(new THREE.Vector3(-8,-10,-8));num_rings.push(10);
	init_nodes.push(new THREE.Vector3(8,-10,8));	num_rings.push(4);
	init_nodes.push(new THREE.Vector3(10,-8,10));	num_rings.push(1);
	let center = new THREE.Vector3(12.5,-8,12.5);
	let radius = new THREE.Vector3(10,-8,10);radius.sub(center);
	let circle_steps = 10
	for(let i=0;i<circle_steps*5;i++){
		center.add(new THREE.Vector3(0,0.1,0));		radius.applyAxisAngle(new THREE.Vector3(0,1,0),2*Math.PI/circle_steps);
		init_nodes.push(center.clone().add(radius));	num_rings.push(1);
	}
	num_rings[num_rings.length-1]=5;
	init_nodes.push(new THREE.Vector3(10,8,10));num_rings.push(4);
	init_nodes.push(new THREE.Vector3(8,10,8));num_rings.push(10);
	init_nodes.push(new THREE.Vector3(-8,10,-8));num_rings.push(4);
	init_nodes.push(new THREE.Vector3(-10,8,-10));num_rings.push(0);
	init_nodes.push(new THREE.Vector3(-10,-8,-10));num_rings.push(4);

	
	let node={p:init_nodes[0],prev:this,next:this}; nodes.push(node);
	for(let i=1;i<init_nodes.length;i++){
		node={p:init_nodes[i], prev:nodes[nodes.length-1], next:this};nodes[nodes.length-1].next=node; nodes.push(node);
	}
	nodes[0].prev=node; node.next=nodes[0];
	function add_rings(item,index){
		if(num_rings[index]!=0){
			let d=item.next.p.clone().sub(item.p).multiplyScalar(1/(num_rings[index]+1));
			let p=item.p.clone();
			for(let i=0;i<num_rings[index];i++){
				p.add(d);
				for(let j=0;j<4;j++){
					rings.push(new THREE.Mesh(new THREE.RingGeometry(2.2,2.5,32,1,j*2*Math.PI/4,2*Math.PI/8),new THREE.MeshBasicMaterial({color:0x3291a8,side:THREE.DoubleSide})));
					rings[rings.length-1].position.set(p.x,p.y,p.z);
					if(d.z!=0){rings[rings.length-1].rotateY(Math.atan(d.x/d.z));}
					else{rings[rings.length-1].rotateY(Math.PI/2);}
					if(d.x<0&&d.z<0&&d.y!=0){rings[rings.length-1].rotateX(Math.atan(d.y/Math.sqrt(d.x*d.x+d.z*d.z)));}
					else{rings[rings.length-1].rotateX(Math.atan(-d.y/Math.sqrt(d.x*d.x+d.z*d.z)));}
					scene.add(rings[rings.length-1]);
				}
			}
		}
	}
	nodes.forEach(add_rings);

	// after customize
	let ipx = []; let ipy = []; let ipz = []; let ipn = [];
	ipx.push(-3.2386461220004956);ipy.push(-9.907541915517957);ipz.push(-3.238646122245734);ipn.push(1);ipx.push(-3.8044953431352653);ipy.push(-9.902719664867762);ipz.push(-3.804495343450571);ipn.push(1);ipx.push(-4.511590119117434);ipy.push(-9.896892527427472);ipz.push(-4.511590119451624);ipn.push(1);ipx.push(-5.218684895099603);ipy.push(-9.891065389987183);ipz.push(-5.218684895452675);ipn.push(1);ipx.push(-5.925779671081772);ipy.push(-9.885238252546895);ipz.push(-5.925779671453727);ipn.push(1);ipx.push(-6.632874447063941);ipy.push(-9.879411115106606);ipz.push(-6.632874447454778);ipn.push(1);ipx.push(-7.3399692230461095);ipy.push(-9.873583977666318);ipz.push(-7.33996922345583);ipn.push(1);ipx.push(-8.047063999028278);ipy.push(-9.86775684022603);ipz.push(-8.047063999456881);ipn.push(1);ipx.push(-8.615326208855453);ipy.push(-9.30603015610256);ipz.push(-8.615326211104636);ipn.push(0);ipx.push(-9.16816257799874);ipy.push(-8.68253685568096);ipz.push(-9.168162582268687);ipn.push(0);ipx.push(-9.720998947142025);ipy.push(-8.05904355525936);ipz.push(-9.720998953432739);ipn.push(0);ipx.push(-9.992307185404275);ipy.push(-7.24734913095386);ipz.push(-9.992307207149848);ipn.push(57);ipx.push(-9.982087292772666);ipy.push(-6.247453582319065);ipz.push(-9.982087343407201);ipn.push(57);ipx.push(-9.971867400141058);ipy.push(-5.24755803368427);ipz.push(-9.971867479664555);ipn.push(57);ipx.push(-9.961647507509449);ipy.push(-4.247662485049475);ipz.push(-9.961647615921908);ipn.push(57);ipx.push(-9.95142761487784);ipy.push(-3.2477669364146804);ipz.push(-9.951427752179262);ipn.push(57);ipx.push(-9.941207722246231);ipy.push(-2.2478713877798855);ipz.push(-9.941207888436615);ipn.push(57);ipx.push(-9.930987829614622);ipy.push(-1.2479758391450888);ipz.push(-9.930988024693974);ipn.push(57);ipx.push(-9.920767936983014);ipy.push(-0.24808029051029237);ipz.push(-9.920768160951337);ipn.push(57);ipx.push(-9.910548044351405);ipy.push(0.7518152581245038);ipz.push(-9.910548297208699);ipn.push(57);ipx.push(-9.90032815171979);ipy.push(1.7517108067593006);ipz.push(-9.900328433466061);ipn.push(57);ipx.push(-9.890108259088173);ipy.push(2.751606355394096);ipz.push(-9.890108569723424);ipn.push(57);ipx.push(-9.879888366456555);ipy.push(3.751501904028891);ipz.push(-9.879888705980786);ipn.push(57);ipx.push(-9.869668473824937);ipy.push(4.751397452663686);ipz.push(-9.869668842238148);ipn.push(57);ipx.push(-9.85944858119332);ipy.push(5.751293001298481);ipz.push(-9.85944897849551);ipn.push(57);ipx.push(-9.849228688561702);ipy.push(6.751188549933276);ipz.push(-9.849229114752873);ipn.push(57);ipx.push(-9.839008795930084);ipy.push(7.751084098568071);ipz.push(-9.839009251010236);ipn.push(57);ipx.push(-9.478708356984086);ipy.push(8.476965702946334);ipz.push(-9.478709830539628);ipn.push(56);ipx.push(-8.88502088716183);ipy.push(9.020171344486908);ipz.push(-8.885024038917042);ipn.push(56);ipx.push(-8.291333417339565);ipy.push(9.563376986027482);ipz.push(-8.291338247294455);ipn.push(56);ipx.push(-7.674964151789492);ipy.push(9.996356066470875);ipz.push(-7.67497507830148);ipn.push(55);ipx.push(-6.967867703328164);ipy.push(9.988428902525548);ipz.push(-6.967902399826947);ipn.push(55);ipx.push(-6.260771254866835);ipy.push(9.980501738580221);ipz.push(-6.260829721352414);ipn.push(55);ipx.push(-5.553674806405507);ipy.push(9.972574574634894);ipz.push(-5.553757042877874);ipn.push(55);ipx.push(-4.846578357944178);ipy.push(9.964647410689567);ipz.push(-4.846684364403333);ipn.push(55);ipx.push(-4.13948190948285);ipy.push(9.95672024674424);ipz.push(-4.139611685928792);ipn.push(55);ipx.push(-3.432385461021521);ipy.push(9.948793082798913);ipz.push(-3.4325390074542543);ipn.push(55);ipx.push(-2.7252890125601925);ipy.push(9.940865918853586);ipz.push(-2.7254663289797176);ipn.push(55);ipx.push(-2.018192564098864);ipy.push(9.932938754908259);ipz.push(-2.0183936505051814);ipn.push(55);ipx.push(-1.3110961156375334);ipy.push(9.925011590962932);ipz.push(-1.311320972030643);ipn.push(55);ipx.push(-0.6039996671762032);ipy.push(9.917084427017604);ipz.push(-0.6042482935561045);ipn.push(55);ipx.push(0.10309678128512674);ipy.push(9.909157263072277);ipz.push(0.10282438491843382);ipn.push(55);ipx.push(0.8101932297464566);ipy.push(9.901230099126943);ipz.push(0.8098970633929723);ipn.push(55);ipx.push(1.517289678207787);ipy.push(9.893302935181607);ipz.push(1.5169697418675108);ipn.push(55);ipx.push(2.224386126669117);ipy.push(9.885375771236271);ipz.push(2.2240424203420486);ipn.push(55);ipx.push(2.9314825751304454);ipy.push(9.877448607290935);ipz.push(2.931115098816585);ipn.push(55);ipx.push(3.638579023591774);ipy.push(9.869521443345599);ipz.push(3.6381877772911215);ipn.push(55);ipx.push(4.345675472053102);ipy.push(9.861594279400263);ipz.push(4.34526045576566);ipn.push(55);ipx.push(5.052771920514431);ipy.push(9.853667115454927);ipz.push(5.0523331342402);ipn.push(55);ipx.push(5.759868368975759);ipy.push(9.845739951509591);ipz.push(5.759405812714741);ipn.push(55);ipx.push(6.466964817437088);ipy.push(9.837812787564255);ipz.push(6.466478491189282);ipn.push(55);ipx.push(7.174061265898416);ipy.push(9.82988562361892);ipz.push(7.173551169663822);ipn.push(55);ipx.push(7.881157714359745);ipy.push(9.821958459673583);ipz.push(7.880623848138363);ipn.push(55);ipx.push(8.498656324436281);ipy.push(9.448995399789196);ipz.push(8.497004110333105);ipn.push(54);ipx.push(9.05642304225629);ipy.push(8.83267507594544);ipz.push(9.052922761674651);ipn.push(54);ipx.push(9.61418976007631);ipy.push(8.216354752101685);ipz.push(9.608841413016204);ipn.push(54);ipx.push(10.011078130538724);ipy.push(7.485013076735587);ipz.push(9.995173782176932);ipn.push(53);ipx.push(10.032583690500045);ipy.push(6.48528824781736);ipz.push(9.985804826249073);ipn.push(53);ipx.push(10.054089250461367);ipy.push(5.485563418899133);ipz.push(9.976435870321213);ipn.push(53);ipx.push(10.075594810422688);ipy.push(4.485838589980906);ipz.push(9.967066914393358);ipn.push(53);ipx.push(10.097100370384009);ipy.push(3.486113761062682);ipz.push(9.957697958465507);ipn.push(53);ipx.push(10.11860593034533);ipy.push(2.486388932144459);ipz.push(9.948329002537657);ipn.push(53);ipx.push(10.140111490306651);ipy.push(1.4866641032262355);ipz.push(9.938960046609806);ipn.push(53);ipx.push(10.161617050267973);ipy.push(0.48693927430801154);ipz.push(9.929591090681955);ipn.push(53);ipx.push(10.183122610229297);ipy.push(-0.5127855546102124);ipz.push(9.920222134754104);ipn.push(53);ipx.push(10.204628170190627);ipy.push(-1.5125103835284364);ipz.push(9.910853178826253);ipn.push(53);ipx.push(10.226133730151957);ipy.push(-2.51223521244666);ipz.push(9.901484222898402);ipn.push(53);ipx.push(10.694773991711516);ipy.push(-3.035481617466727);ipz.push(9.697319813114792);ipn.push(52);ipx.push(11.610548970933788);ipy.push(-3.0822495994088444);ipz.push(9.298359952293431);ipn.push(52);ipx.push(12.548602076747702);ipy.push(-3.1291119849833287);ipz.push(9.151966657600243);ipn.push(51);ipx.push(13.520072393486796);ipy.push(-3.1761159770806167);ipz.push(9.38442320928631);ipn.push(51);ipx.push(14.428475546639767);ipy.push(-3.2230885474202484);ipz.push(9.721026146979417);ipn.push(50);ipx.push(15.084610045448247);ipy.push(-3.2699354307292596);ipz.push(10.47421462870069);ipn.push(50);ipx.push(15.684775430436575);ipy.push(-3.3167744238007897);ipz.push(11.25150817457248);ipn.push(49);ipx.push(15.781218791043521);ipy.push(-3.363542404734975);ipz.push(12.245747297798973);ipn.push(49);ipx.push(15.877662151650473);ipy.push(-3.410310385669159);ipz.push(13.239986421025465);ipn.push(49);ipx.push(15.356382011882241);ipy.push(-3.4573143773868074);ipz.push(14.092076580953277);ipn.push(48);ipx.push(14.835101872114011);ipy.push(-3.504318369104456);ipz.push(14.944166740881089);ipn.push(48);ipx.push(13.995580632429034);ipy.push(-3.551196673700654);ipz.push(15.427603150829917);ipn.push(47);ipx.push(13.07649911776487);ipy.push(-3.598043556516488);ipz.push(15.818876123284003);ipn.push(47);ipx.push(12.118008494260875);ipy.push(-3.644835207538601);ipz.push(15.785398448610563);ipn.push(46);ipx.push(11.142628252682668);ipy.push(-3.691603187791976);ipz.push(15.569884782311044);ipn.push(46);ipx.push(10.362895249997052);ipy.push(-3.738512774392402);ipz.push(15.028233004375277);ipn.push(45);ipx.push(9.713593739906491);ipy.push(-3.785516765224193);ipz.push(14.269155818682004);ipn.push(45);ipx.push(9.28876844986466);ipy.push(-3.8324579123892857);ipz.push(13.415706124685117);ipn.push(44);ipx.push(9.200657489895928);ipy.push(-3.8793047940543297);ipz.push(12.420697668232789);ipn.push(44);ipx.push(9.290892221915682);ipy.push(-3.9261280048192875);ipz.push(11.465878432050074);ipn.push(43);ipx.push(9.797266901908586);ipy.push(-3.9728959834840443);ipz.push(10.604834043163125);ipn.push(43);ipx.push(10.386880739131694);ipy.push(-4.019711164168791);ipz.push(9.839407576963758);ipn.push(42);ipx.push(11.3094512052756);ipy.push(-4.066715152933497);ipz.push(9.456452801514711);ipn.push(42);ipx.push(12.232021671419506);ipy.push(-4.113719141698208);ipz.push(9.073498026065664);ipn.push(42);ipx.push(13.20555876179725);ipy.push(-4.160566020677972);ipz.push(9.297173915666454);ipn.push(41);ipx.push(14.179095852174992);ipy.push(-4.207412899657733);ipz.push(9.520849805267243);ipn.push(41);ipx.push(14.872630829850022);ipy.push(-4.254188765017761);ipz.push(10.216118744876832);ipn.push(40);ipx.push(15.535054461669196);ipy.push(-4.3009567399756);ipz.push(10.963786912265176);ipn.push(40);ipx.push(15.730836722350224);ipy.push(-4.3479135221202325);ipz.push(11.909925480742183);ipn.push(39);ipx.push(15.809958640246716);ipy.push(-4.394917506061566);ipz.push(12.905681649491354);ipn.push(39);ipx.push(15.533466817208522);ipy.push(-4.441827223266424);ipz.push(13.818045698962742);ipn.push(38);ipx.push(15.019899166880533);ipy.push(-4.488674095980299);ipz.push(14.674815002248941);ipn.push(38);ipx.push(14.305228005329527);ipy.push(-4.53548151549126);ipz.push(15.302679919854013);ipn.push(37);ipx.push(13.389453332555492);ipy.push(-4.582249481799308);ipz.push(15.701640451777946);ipn.push(37);ipx.push(12.45140031323375);ipy.push(-4.629111850658697);ipz.push(15.848034520472725);ipn.push(36);ipx.push(11.479929774090445);ipy.push(-4.676115823345096);ipz.push(15.615578894323765);ipn.push(36);ipx.push(10.571526253411205);ipy.push(-4.723088373112813);ipz.push(15.278976861918018);ipn.push(35);ipx.push(9.915390806588228);ipy.push(-4.769935231205802);ipz.push(14.525789204485132);ipn.push(35);ipx.push(9.31522439795311);ipy.push(-4.81677419810195);ipz.push(13.748496416841737);ipn.push(34);ipx.push(9.218779333008674);ipy.push(-4.863542144226539);ipz.push(12.754257457303757);ipn.push(34);ipx.push(9.122334268064238);ipy.push(-4.910310090351123);ipz.push(11.760018497765776);ipn.push(34);ipx.push(9.643612514238612);ipy.push(-4.957314036775307);ipz.push(10.907927176905192);ipn.push(33);ipx.push(10.164890760412973);ipy.push(-5.004317983199487);ipz.push(10.055835856044608);ipn.push(33);ipx.push(11.004410704827832);ipy.push(-5.051196231665778);ipz.push(9.572397055346904);ipn.push(32);ipx.push(11.92349107380282);ipy.push(-5.098043055642597);ipz.push(9.181121384689918);ipn.push(32);ipx.push(12.881981959569837);ipy.push(-5.144834632155941);ipz.push(9.214595519693063);ipn.push(31);ipx.push(13.857363066819152);ipy.push(-5.1916025311849445);ipz.push(9.430105285693404);ipn.push(31);ipx.push(14.63709878080836);ipy.push(-5.238512021883606);ipz.push(9.971753484415308);ipn.push(30);ipx.push(15.286404232624163);ipy.push(-5.2855159070287066);ipz.push(10.730827304951584);ipn.push(30);ipx.push(15.711234613268845);ipy.push(-5.332456935864775);ipz.push(11.584274741073338);ipn.push(29);ipx.push(15.799352387156846);ipy.push(-5.379303680237294);ipz.push(12.579282600573313);ipn.push(29);ipx.push(15.709124834260377);ipy.push(-5.426126738040246);ipz.push(13.534102838903257);ipn.push(28);ipx.push(15.202758185533478);ipy.push(-5.472894527180875);ipz.push(14.395151961169796);ipn.push(28);ipx.push(14.613151698459829);ipy.push(-5.519709506926408);ipz.push(15.160584448820654);ipn.push(27);ipx.push(13.690585857999155);ipy.push(-5.566713249091556);ipz.push(15.543550398008781);ipn.push(27);ipx.push(12.76802001753848);ipy.push(-5.613716991256702);ipz.push(15.926516347196916);ipn.push(27);ipx.push(11.794479338834124);ipy.push(-5.660563549896326);ipz.push(15.702856009069055);ipn.push(26);ipx.push(10.820938660129768);ipy.push(-5.707410108535949);ipz.push(15.479195670941202);ipn.push(26);ipx.push(10.12738865845098);ipy.push(-5.754185543879772);ipz.push(14.783941255007615);ipn.push(25);ipx.push(9.464948731997257);ipy.push(-5.800953076635171);ipz.push(14.036287497095614);ipn.push(25);ipx.push(9.269140707932388);ipy.push(-5.847909310056671);ipz.push(13.09015357729108);ipn.push(24);ipx.push(9.189990659464735);ipy.push(-5.894912718644696);ipz.push(12.094399617013412);ipn.push(24);ipx.push(9.466452076982646);ipy.push(-5.941821757285787);ipz.push(11.18202494596418);ipn.push(23);ipx.push(9.9799878051576);ipy.push(-5.988667882628922);ipz.push(10.325236467733905);ipn.push(23);ipx.push(10.694632892284282);ipy.push(-6.035474412635217);ipz.push(9.697338689609277);ipn.push(22);ipx.push(11.610387338362692);ipy.push(-6.082241347304673);ipz.push(9.298331611590294);ipn.push(22);ipx.push(12.54843437342118);ipy.push(-6.1291025603127105);ipz.push(9.151884010867471);ipn.push(21);ipx.push(13.519920291949788);ipy.push(-6.176105190828624);ipz.push(9.384275626088888);ipn.push(21);ipx.push(14.428349227474477);ipy.push(-6.223076318203138);ipz.push(9.720815048563828);ipn.push(20);ipx.push(15.084550230983496);ipy.push(-6.269921433012045);ipz.push(10.473945700052866);ipn.push(20);ipx.push(15.68478742560439);ipy.push(-6.31675859034065);ipz.push(11.25118604977174);ipn.push(19);ipx.push(15.78135034023217);ipy.push(-6.363524130346543);ipz.push(12.24541368355916);ipn.push(19);ipx.push(15.87791325485995);ipy.push(-6.410289670352436);ipz.push(13.239641317346582);ipn.push(19);ipx.push(15.356765930444302);ipy.push(-6.457290486956484);ipz.push(14.091812890149242);ipn.push(18);ipx.push(14.835618606028655);ipy.push(-6.5042913035605325);ipz.push(14.943984462951907);ipn.push(18);ipx.push(13.996188215170191);ipy.push(-6.551165674633209);ipz.push(15.427588511360362);ipn.push(17);ipx.push(13.077187057701023);ipy.push(-6.598008434323041);ipz.push(15.819050678670271);ipn.push(17);ipx.push(12.118678085988531);ipy.push(-6.644794865714168);ipz.push(15.785821171809609);ipn.push(16);ipx.push(11.14323719388604);ipy.push(-6.691557156405853);ipz.push(15.570580947447272);ipn.push(16);ipx.push(10.363314216333068);ipy.push(-6.738460028479845);ipz.push(15.02918007304436);ipn.push(15);ipx.push(9.713736515146435);ipy.push(-6.785456621475372);ipz.push(14.270338765281073);ipn.push(15);ipx.push(9.288554597693492);ipy.push(-6.832389489214114);ipz.push(13.417047369266102);ipn.push(14);ipx.push(9.199966355841092);ipy.push(-6.879226769067674);ipz.push(12.422080840873607);ipn.push(14);ipx.push(9.289698279592091);ipy.push(-6.926039285737293);ipz.push(11.467191594954178);ipn.push(13);ipx.push(9.795510589751046);ipy.push(-6.972794021644397);ipz.push(10.605816008138573);ipn.push(13);ipx.push(10.384609754049082);ipy.push(-7.019595167655766);ipz.push(9.83996829482585);ipn.push(12);ipx.push(11.306856334903449);ipy.push(-7.066581954084201);ipz.push(9.456232075524651);ipn.push(12);ipx.push(12.229102915757808);ipy.push(-7.113568740512637);ipz.push(9.072495856223453);ipn.push(12);ipx.push(13.202890127086453);ipy.push(-7.160393319320868);ipz.push(9.29508499763023);ipn.push(11);ipx.push(14.176677338415098);ipy.push(-7.207217898129097);ipz.push(9.517674139037016);ipn.push(11);ipx.push(14.871260044338744);ipy.push(-7.253963894744465);ipz.push(10.211928632969066);ipn.push(10);ipx.push(15.534820027439611);ipy.push(-7.300701160005066);ipz.push(10.958590388292816);ipn.push(10);ipx.push(15.732396536172057);ipy.push(-7.347620038510818);ipz.push(11.90440311140564);ipn.push(9);ipx.push(15.813477176312393);ipy.push(-7.394584320327858);ipz.push(12.90000357646573);ipn.push(9);ipx.push(15.539099526972413);ipy.push(-7.44144782712097);ipz.push(13.813102305617093);ipn.push(8);ipx.push(15.027749684645551);ipy.push(-7.488244150564795);ipz.push(14.671199877495981);ipn.push(8);ipx.push(14.314888273286222);ipy.push(-7.534995179978945);ipz.push(15.301333612531337);ipn.push(7);ipx.push(13.40051529289442);ipy.push(-7.581700915363418);ipz.push(15.70350351072316);ipn.push(7);ipx.push(12.46289555179614);ipy.push(-7.62852636351957);ipz.push(15.853544104088074);ipn.push(6);ipx.push(11.490405669638143);ipy.push(-7.67553138083325);ipz.push(15.625390740212632);ipn.push(6);ipx.push(10.580417143047427);ipy.push(-7.722636474839677);ipz.push(15.292912650555577);ipn.push(5);ipx.push(9.920434038725979);ipy.push(-7.770141875617078);ipz.push(14.543135657772238);ipn.push(5);ipx.push(9.316641984095439);ipy.push(-7.818309573746018);ipz.push(13.768965750765467);ipn.push(4);ipx.push(9.218569376683043);ipy.push(-7.872437948038769);ipz.push(12.775259615747796);ipn.push(4);ipx.push(9.120496769270643);ipy.push(-7.926566322331521);ipz.push(11.781553480730116);ipn.push(4);ipx.push(9.434134792708557);ipy.push(-8.032699699286935);ipz.push(10.848373224048423);ipn.push(3);ipx.push(9.793518441796472);ipy.push(-8.144611409871562);ipz.push(9.92191806495958);ipn.push(3);ipx.push(9.29510073904383);ipy.push(-8.643972485977967);ipz.push(9.294339154356589);ipn.push(2);ipx.push(8.701371774975568);ipy.push(-9.186383491586803);ipz.push(8.699968715807564);ipn.push(2);ipx.push(8.107642810907327);ipy.push(-9.7287944971956);ipz.push(8.10559827725855);ipn.push(2);ipx.push(7.459427699342694);ipy.push(-10);ipz.push(7.452670545584267);ipn.push(1);ipx.push(6.7567264402816525);ipy.push(-10);ipz.push(6.741185520784688);ipn.push(1);ipx.push(6.054025181220597);ipy.push(-10);ipz.push(6.029700495985086);ipn.push(1);ipx.push(5.351323922159539);ipy.push(-10);ipz.push(5.3182154711854706);ipn.push(1);ipx.push(4.648622663098458);ipy.push(-10);ipz.push(4.606730446385844);ipn.push(1);ipx.push(3.945921404037411);ipy.push(-10);ipz.push(3.8952454215862264);ipn.push(1);ipx.push(3.243220144976367);ipy.push(-10);ipz.push(3.183760396786622);ipn.push(1);ipx.push(2.5405188859153394);ipy.push(-10);ipz.push(2.472275371987018);ipn.push(1);ipx.push(1.8378176268543096);ipy.push(-10);ipz.push(1.7607903471874176);ipn.push(1);ipx.push(1.1351163677932714);ipy.push(-10);ipz.push(1.0493053223878015);ipn.push(1);ipx.push(0.43241510873224365);ipy.push(-10);ipz.push(0.33782029758817467);ipn.push(1);ipx.push(-0.27028615032882275);ipy.push(-10);ipz.push(-0.3736647272114588);ipn.push(1);ipx.push(-0.9729874093898461);ipy.push(-10);ipz.push(-1.0851497520110935);ipn.push(1);ipx.push(-1.675688668450875);ipy.push(-10);ipz.push(-1.796634776810721);ipn.push(1);ipx.push(-2.37838992751189);ipy.push(-10);ipz.push(-2.5081198016103508);ipn.push(1);ipx.push(-3.0810911865729036);ipy.push(-10);ipz.push(-3.2196048264099537);ipn.push(1);ipx.push(-3.783792445633919);ipy.push(-10);ipz.push(-3.9310898512095953);ipn.push(1);ipx.push(-4.486493704694931);ipy.push(-10);ipz.push(-4.642574876009242);ipn.push(1);ipx.push(-5.18919496375598);ipy.push(-10);ipz.push(-5.354059900808888);ipn.push(1);ipx.push(-5.891896222816985);ipy.push(-10);ipz.push(-6.065544925608535);ipn.push(1);ipx.push(-6.59459748187799);ipy.push(-10);ipz.push(-6.777029950408181);ipn.push(1);ipx.push(-7.297298740938995);ipy.push(-10);ipz.push(-7.488514975207828);ipn.push(1);ipx.push(-8);ipy.push(-10);ipz.push(-8.200000000007474);ipn.push(1);
	//for(let i=0;i<200;i++){
	for(let i=0;i<ipx.length;i++){
		particles.push({
			s:new THREE.Mesh(new THREE.SphereGeometry(0.5),	new THREE.MeshStandardMaterial({color: 0xff0000})),
			//n:nodes[0]
			n:nodes[ipn[i]]
		});
		// to create initialization, use next line and comment out the one after
		//particles[particles.length-1].s.position.set(nodes[0].p.x,nodes[0].p.y,nodes[0].p.z-i);
		particles[particles.length-1].s.position.set(ipx[i],ipy[i],ipz[i]);
		scene.add(particles[particles.length-1].s);
	}
	let cylinder1 = new THREE.Mesh(new THREE.CylinderGeometry(2,2,7,50),new THREE.MeshBasicMaterial({color:0x000000}));
		cylinder1.position.set(-10,0-2,-10);
		scene.add(cylinder1);
	let cylinder2 = new THREE.Mesh(new THREE.CylinderGeometry(2,2,3,50),new THREE.MeshBasicMaterial({color:0xffff00}));
		cylinder2.position.set(-10,4.85-2,-10);
		scene.add(cylinder2);
	let cylinder3 = new THREE.Mesh(new THREE.CylinderGeometry(1,1,1,50),new THREE.MeshBasicMaterial({color:0x808080}));
		cylinder3.position.set(-10,6.15-2,-10);
		scene.add(cylinder3);
	//use below lines to get initial positions of particles
	//let node_holder = particles[particles.length-1].n;
	//while(node_holder == particles[particles.length-1].n){particles.forEach(update_particles);}
	//let init_set_string = new String('');
	//function init_particles(item){
	//init_set_string = init_set_string+
	//		"ipx.push("+item.s.position.x.toString()+
	//		");ipy.push("+item.s.position.y.toString()+
	//		");ipz.push("+item.s.position.z.toString()+");";
	//	let temp_node;
	//	for(let l=0;l<nodes.length;l++){if(nodes[l]==item.n){init_set_string=init_set_string+"ipn.push("+l.toString()+");";break;}}
	//}
	//particles.forEach(init_particles);
	//document.getElementById("init_set").innerHTML = init_set_string;
}
initialize_page();

function animate() {
	requestAnimationFrame(animate);
	particles.forEach(update_particles);	rings.forEach(update_rings);
	controls.update();			renderer.render( scene, camera );
	//counter+=0.1;				if(counter>9){counter=0;}
}
animate();
</script></body></html>
